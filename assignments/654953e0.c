#include<stdio.h>
#include<stdlib.h>
#include<string.h>
typedef struct _1 {
  char* _28;
  struct _1* _32;
} _27;
typedef struct _2 {
  char* _22;
  char* _23;
  struct _2* _32;
} _21;
void _14(_21* _15);
void _16(_27* _25);
void _17(_27* _25);
_27* _18(_27* _31);
_27* _20(char* _25,_27* _31);
_21* _24(char* _25,_21* _26);
char * _29(char* _30,_27 * _31);
_27* _3(_21 * _15, _27 * _25){
  if(_15->_32==NULL)
    return _25;
  _25=_20(_15->_22,_25);
  return _3(_15->_32,_25);
}
_27 * _4(_21 * _15, _27 * _25){
  _27* _5 = _18(_25);
  _5=_3(_15,_5);
  return _5;
}
_27 * _11(_27 * _30, _27 * _25, _21 * _15){
  if(_25->_32==NULL)
    return _30;
  _27 * _5 = _4(_15,_25);
  if(_5->_32==NULL){
    printf("cycle\n");
    exit(0);
  }
  _27 * _6 = malloc(sizeof(_27));
  _6->_32=_30;
  _6->_28=_29(_5->_28,_5->_32);
  _25=_20(_6->_28,_25);
  _15=_24(_6->_28,_15);
  return _11(_6,_25,_15);
}
_27 * _12;
_21 * _13;
int main(){
  _12 = malloc(sizeof(_27));
  _13 = malloc(sizeof(_21));
  _12->_32=NULL;
  _13->_32=NULL;
  _27* _30 =_12;
  while (1) {
    char _8[80];
    _27 * _7 = malloc(sizeof(_27));
    _27 * _9 = malloc(sizeof(_27));
    _21 * _10 = malloc(sizeof(_21));
    fgets(_8, sizeof(_8), stdin);
    if(feof(stdin)) break;
    _7 -> _28 = strdup(_8);
    _10 -> _22   = strdup(_8);
    _7 -> _32 = _12;
    _12=_7;
    fgets(_8, sizeof(_8), stdin);
    _9 -> _28 = strdup(_8);
    _10 -> _23   = strdup(_8);
    _9 -> _32 = _12;
    _12=_9;
    _10 -> _32 = _13;
    _13=_10;
  }
  _16(_11(_30,_12,_13));
  return 0;
}
void _14(_21* _15){
  if(_15->_32==NULL)
    return;
  printf("[ %s , %s ]\n",_15->_22,_15->_23);
  _14(_15->_32);
}
void _16(_27* _25){
  if(_25->_32==NULL)
    return;
  _16(_25->_32);
  printf("%s",_25->_28);
}
void _17(_27* _25){
  if(_25->_32==NULL)
    return;
  printf("%s",_25->_28);
  _17(_25->_32);
}
_27* _18(_27* _31){
  if(_31->_32==NULL)
    return _31;
  _27* _19 = malloc(sizeof(_27));
  _19->_28 = _31->_28;
  _19->_32 = _18(_31->_32);
  return _19;
}
_27* _20(char* _25,_27* _31){
  if(_31->_32==NULL)
    return _31;
  if(strcmp(_25,_31->_28)==0)
    return _20(_25,_31->_32);
  _31->_32=_20(_25,_31->_32);
  return _31;
}
_21* _24(char* _25,_21* _26){
  if(_26->_32==NULL)
    return _26;
  if((strcmp(_25,_26->_22)==0)||(strcmp(_25,_26->_23)==0))
    return _24(_25,_26->_32);
  _26->_32=_24(_25,_26->_32);
  return _26;
}
char * _29(char* _30,_27 * _31){
  if(_31->_32==NULL)
    return _30;
  if(strcmp(_30,_31->_28)>0)
    return _29(_31->_28,_31->_32);
  else return _29(_30,_31->_32);
}
